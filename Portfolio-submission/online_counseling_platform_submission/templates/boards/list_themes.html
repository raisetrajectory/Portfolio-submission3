{% extends "base.html" %}
{% block content %}
{% if messages %}
    {% for message in messages %}
    <div>{{ message.message }}</div>
    {% endfor %}
{% endif %}
<h3>チャット画面一覧</h3>
<p>契約カウンセラー: {{ theme.user.username }}</p>
{% comment %} {% if request.user.is_authenticated %}
    {% if request.user.is_counselor %}
        <p><a class="navbar-brand" href="{% url 'boards:create_theme' %}">【カウンセラー側】チャット画面を新たに作成する</a></p>
    {% else %}
        <p>カウンセラーと契約するとチャット画面を作成できるようになります</p>
    {% endif %}
{% endif %} {% endcomment %}

{% if request.user.is_authenticated %}
    <p>ログインユーザー: {{ request.user.username }}</p>
    {% if request.user.is_counselor %}
        <p>カウンセラーとしてログイン中</p>
        <p><a class="navbar-brand" href="{% url 'boards:create_theme' %}">【カウンセラー側】チャット画面を新たに作成する</a></p>
    {% else %}
        <p>カウンセラーではありません</p>
        <p>カウンセラーと契約するとチャット画面を作成できるようになります</p>
    {% endif %}
{% else %}
    <p>ログインしていません</p>
{% endif %}

{% if current_user_email == "admin31@sample.com" %}
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="{% url 'boards:list_themes' %}">チャット制作画面へ</a>
    </nav>
{% endif %}

{% comment %} {% if user_type == 'User' %} {% endcomment %}
{% comment %} {% if request.user.counselor %} {% endcomment %}
<p><a class="navbar-brand" href="{% url 'boards:create_theme' %}">【ユーザー側】チャット画面を新たに作成する</a></p>
{% comment %} {% else %} {% endcomment %}
{% comment %} <p>カウンセラーと契約するとチャット画面を作成できるようになります</p> {% endcomment %}
{% comment %} {% endif %} {% endcomment %}
{% comment %} {% endif %} {% endcomment %}

<table class="table table-striped table-hover">
    <thead>
        <tr>
            <th>#</th>
            <th>タイトル</th>
            <th>契約カウンセラー【チャット作成者】</th>
        </tr>
    </thead>
    <tbody>
    {% for theme in themes %}
    <tr>
        <td>{{ forloop.counter }}</td>
        <td><a href="{% url 'boards:post_comments' theme_id=theme.id %}">{{ theme.title }}</a></td>
        <td><a href="{% url 'boards:edit_theme' id=theme.id %}">{{ theme.user.username }}</a></td>
        {% if request.user.is_counselor %}
        {% comment %} <p><a href="{% url 'boards:edit_theme' id=theme.id %}">テーマを編集する</a></p> {% endcomment %}
        {% endif %}
    </tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}


